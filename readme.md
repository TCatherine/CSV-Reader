# CSV Reader

## Build and Run
>### Build:
>`mkdir build`
>
>`cmake -B./build/`
>
>`cd build`
>
>`make`
>
>`mv csv-reader ..`
>
>`cd ..`


> ### Run:
>`./csv_reader test/example.csv`


## Немного информации о реализации
Все числа хранятся в 32-битном interger

Значение ячейки может содержать либо целочисленное значение или выражение, представленное в виде строки. Был выбран следующий тип: `std::variant<int32_t, std::string>`

Все данные хранятся в ассоциативном контейнере: `using cell_t = std::map<uint32_t, header_value_t>`, где ключ - это номер строки, а значение - это заголовок и ячейка, представленные также в ассоциативном контейнере: `using header_value_t = std::map<std::string, std::variant<int32_t, std::string>>`

Сначала считывается весь файл и сохраняется в структуру, описанную выше. Вычисление выражений происходит после. Для этого в структуре `std::multimap<uint32_t, std::string> m_expression` хранятся адрес ячеек, который нужно будет обработать.

## Описание обрабатываемых ошибок
В программе предусмотрена обработка следующих ошибок:
1. Связанные с заголовком:
   - Проверка, что первая строка начинается с сепаратора
   - Проверка, что нет одинаковых заголовков
   - Проверка, что нет пустых заголовков [Предупреждение: пробел или табуляция считается заголовком (тест: example4.csv)]
2. Связанные с нумерацией строк:
   - Проверка, что есть значения (хотя бы один сепаратор) 
   - Проверка, что номер строки - это целочисленное значение без пробелов 
3. Чтение данных:
   - Проверка, что значение не пустое
   - Проверка, что количество элементов в строке совпадает с количеством заголовков
4. Обработка выражений:
   - Проверка, что выражение начинается с символа `=` 
   - Проверка, что есть знак операции [Предупреждение: выражение вида: `=A1` не допускается]
   - Проверка, деление на ноль

## Информация о тестах
Все файлы тестов хранятся в папке test.

| File            | Check Description   | Ok/Not Ok |
| ----------------| --------------------|-----------|
| example.csv     | Самый простой тест  |   Ok      |
| example1.csv    |Вычисление выражений |   Ok      |
| example2.csv    |Вычисление выражений |   Ok      |
| example3.csv    |Вычисление выражений на одной строке (с одним ключом) |   Ok      |
| example4.csv    |Вместо заголовка пробел |   Ok      |
| example5.csv    |Указывает на ячейку, где еще вычислена операция |   Ok      |
| empty_line.csv  |Если нет строк       |   Ok      |
|empty_header.csv |Если нет значений    |  Not Ok   |
|empty_header2.csv|Если нет строк (в первой строке запятая)|  Not Ok      |
|valid_header1.csv|Начинается не с разделителя|  Not Ok   |
|valid_header2.csv|Есть пустой заголовок|  Not Ok   |
|valid_header3.csv|Заканчивается на разделитель|  Not Ok   |
|valid_header4.csv|Одинаковые заголовки|  Not Ok   |
|valid_idx1.csv|Индекс отрицательный|  Not Ok   |
|valid_idx2.csv|Символ вместо индекса|  Not Ok   |
|valid_idx3.csv|Если есть пробел|  Not Ok   |
|valid_link1.csv|Есть указатель на несуществующий заголовок|  Not Ok   |
|valid_link2.csv|Есть указатель на несуществующую строку|  Not Ok   |
|valid_number_values1.csv|Строка заканчивается разделителем|  Not Ok   |
|valid_number_values2.csv|В строке значений меньше, чем в заголовоке|  Not Ok   |
|valid_number_values3.csv|В строке значений больше, чем в заголовоке|  Not Ok   |
|valid_expression1.csv|Выражение не начинается на `=`|  Not Ok   |
|valid_expression2.csv|В выражении нет знака операции|  Not Ok   |
|valid_expression3.csv|Некорректный аргумент|  Not Ok   |
